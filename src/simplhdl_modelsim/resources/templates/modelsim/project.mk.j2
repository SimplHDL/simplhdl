TOPLEVELS := {{toplevels}}

VHDL_FILESETS := $(addsuffix .com,$(wildcard *-vhdl.fileset))
VERILOG_FILESETS := $(addsuffix .com,$(wildcard *verilog.fileset))

{% set libpaths = [] %}
{% for library in libraries %}
{% set libpath = library.path %}
{{ libpaths.append(libpath) or ''}}

{{libpath}}:
	$(VLIB) {{library.name}}
	$(VMAP) {{library.name}} {{libpath}}

{% endfor %}

{% for library in external_libraries %}
{{ libpaths.append(library.name + ".map") or '' }}
{{library.name}}.map:
	$(VMAP) {{library.name}} {{library.path}}
	@touch $@

{% endfor %}

LIBRARIES := {{libpaths|join(' ')}}

